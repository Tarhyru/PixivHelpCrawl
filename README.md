# PixivHelpCrawl

> 一个针对P站的爬虫

## 安装
> npm install 
## 运行
> npm run build 
> npm run start 

默认监听8082端口


## 关于built文件夹
初衷是只部署这个文件夹就可以运行，但是当前更多的是手动修改没有脚本化，还有一些东西没有组织好

## 关于数据库
位于db目录下使用了sqlite，人肉做了区分，build后需要手动移动数据库去built目录下

## 其它说明
默认下载到/client/download 中     
选择“云端下载读取到得全部”，会将所有返回值下载，即使它没有展示..   
搜索模式下也许会有很多         

## 总结
刚开始学习nodejs时开始的，陆陆续续尝试了很多东西以及验证一些想法。如果一开始找个api库估计会写的更简单优雅实用一些，现在感觉更像是自嗨，不过作为工具来说切实的方便了自身。

## TODO
- [x]  控制台修复
- [ ]  针对多图的处理
- [ ]  控制台扩展，合理的输出，可以知道哪些天缓存了，哪些天没有，将几天的数据合并展示等功能。
- [ ]  缓存的图片和下载保存的路径与前端目录分离
- [ ]  对已添加过滤的tag做操作
- [ ]  在搜索功能上添加更高级的查看功能（取时间段去重查看，根据tag筛选时间段）
        搜索功能先提供大概情况预览，方便输入合理的关键字
- [ ]  更合理的后台输出 线上模式时
        去除http请求的日志，添加过滤的tag时显示tag名称
        取缓存数据时输出具体的内容，缓存时也是，正常下载时不再输出具体的名称
- [ ]   更合理的下载队列
- [x]  过滤功能重构(使用数据库)
- [x]  下载完信息的保存,添加前的验证,及相关的同步操作
- [X]  下载文件的过程中不允许同步
- [X]  将使用mysql,redis的部分换成sqlite
- [X]  对数据传递，标准化，格式化
