var T=Object.defineProperty,b=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var q=(a,r,t)=>r in a?T(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,g=(a,r)=>{for(var t in r||(r={}))G.call(r,t)&&q(a,t,r[t]);if(F)for(var t of F(r))P.call(r,t)&&q(a,t,r[t]);return a},v=(a,r)=>b(a,D(r));import{u as S,j as e,G as E,r as c,o as i,F as B}from"./react-venders.669d625f.js";import{U as A,a4 as y}from"./index.c8ca1af3.js";import{C as l}from"./index.b0ecaf29.js";import{q as j,P as z,s as J,t as K}from"./css.520be33d.js";import{B as x}from"./button.ce6ccd71.js";import{S as L}from"./index.f6b7cb7c.js";import{I as k}from"./index.407a8341.js";import{I as O}from"./index.b4d20d63.js";import{C as R,P as $,I as H}from"./define.0d09205b.js";import"./RouteContext.0a09958b.js";import"./PortalWrapper.4cc9adbc.js";import"./UpOutlined.88269719.js";function ae(){const a=S();return e(A.exports.KeepAlive,{id:`TagImages-${JSON.stringify(a.query)}`,cashKey:"TagImages",children:e(W,{})})}function W(){const a=E(),r=S(),[t,d]=c.exports.useState(),h=c.exports.useRef(),[N,C]=c.exports.useState(4),o=c.exports.useRef({offset:0,limit:30}),u=c.exports.useRef(),I=r.query,m={width:"50%",minWidth:"200px",padding:"12px"};return c.exports.useEffect(()=>{j(I).then(s=>{s.contents&&(d(s.contents),h.current=JSON.stringify(s.contents))})},[]),i(z,{title:e("div",{className:"query-content",children:e("div",{className:"query-item",children:e(x,{onClick:()=>{a.goBack()},children:"\u8FD4\u56DE"})})}),extra:e(B,{children:e("div",{className:"query-content",children:i("div",{className:"query-item",children:[e(L,{value:N,onChange:s=>{C(s)},options:R}),e(L,{defaultValue:o.current.limit,onChange:s=>{o.current.limit=s,o.current.offset=0,u.current.queryList(n=>{u.current.setList(n)})},options:$}),e(k,{onBlur:s=>{const n=Number(s.target.value);n&&(o.current.offset=n,u.current.queryList(p=>{u.current.setList(p)}))}})]})})}),children:[e(l,{size:"small",loading:!t,children:t&&i(B,{children:[e(l.Grid,{hoverable:!1,style:m,children:e("div",{className:"flex items-center",children:e("div",{children:t&&`${t.name} (${t.imageCount})`})})}),e(l.Grid,{hoverable:!1,style:m,children:i("div",{className:"flex items-center",children:[e("div",{children:"\u7FFB\u8BD1:"}),e("div",{style:{minHeight:"32px"},className:"pl-4 flex-1 flex items-center",children:t.translatedName||"-"})]})}),e(l.Grid,{hoverable:!1,style:m,children:i("div",{className:"flex items-center",children:[e("div",{children:"likeLevel:"}),e("div",{className:"pl-4 flex-1",children:e(k,{value:t.likeLevel,onChange:s=>{d(n=>v(g({},n||{}),{likeLevel:s|0}))}})})]})}),e(l.Grid,{hoverable:!1,style:m,children:i("div",{className:"flex items-center",children:[e("div",{children:" \u81EA\u5B9A\u4E49\u540D\u79F0:"}),e("div",{className:"pl-4 flex-1",children:e(O,{value:t.customName,onChange:s=>{d(n=>v(g({},n||{}),{customName:s.target.value||""}))}})})]})}),i(l.Grid,{hoverable:!1,style:m,children:[e(x,{onClick:()=>{h.current&&d(JSON.parse(h.current))},children:"\u91CD\u7F6E"}),e(x,{className:"ml-4",type:"primary",onClick:()=>{const{id:s,likeLevel:n,customName:p}=t;J({id:s,likeLevel:n,customName:p}).then(f=>{f.contents&&f.contents.success?y.success("\u66F4\u65B0\u6210\u529F"):y.error("\u66F4\u65B0\u5931\u8D25")}).catch(f=>{console.log("check error:",f),y.error("\u66F4\u65B0\u5931\u8D25")})},children:"\u66F4\u65B0"})]})]})}),e(l,{className:"fall-content",size:"small",children:e(H,{ref:u,columnsCount:N,setColumnsCount:C,initialLoad:!0,queryParams:I,pageParams:o,queryFn:K})})]})}export{ae as default};
