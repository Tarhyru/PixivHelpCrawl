var G=Object.defineProperty,M=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var L=(r,s,t)=>s in r?G(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t,g=(r,s)=>{for(var t in s||(s={}))w.call(s,t)&&L(r,t,s[t]);if(A)for(var t of A(s))z.call(s,t)&&L(r,t,s[t]);return r},B=(r,s)=>M(r,P(s));import{u as b,j as e,G as E,r as a,o as l,F as k}from"./react-venders.669d625f.js";import{U as j,a4 as f}from"./index.c8ca1af3.js";import{C as n,M as H}from"./index.b0ecaf29.js";import{v as K,P as R,w as V,x as $,y as O}from"./css.520be33d.js";import{B as x}from"./button.ce6ccd71.js";import{S as D}from"./index.f6b7cb7c.js";import{I as y}from"./index.407a8341.js";import{C as T,P as W,I as J}from"./define.0d09205b.js";import"./RouteContext.0a09958b.js";import"./PortalWrapper.4cc9adbc.js";import"./UpOutlined.88269719.js";function ne(){const r=b();return e(j.exports.KeepAlive,{id:`AuthorImages-${JSON.stringify(r.query)}`,cashKey:"AuthorImages",children:e(U,{})})}function U(){const r=E(),s=b(),[t,p]=a.exports.useState(),[C,N]=a.exports.useState(4),d=a.exports.useRef({offset:0,limit:30}),v=a.exports.useRef(),m=s.query,o={width:"50%",minWidth:"200px",padding:"12px"},[q,F]=a.exports.useState(!1),[S,I]=a.exports.useState(!1),c=a.exports.useRef({offset:0,limit:90});return a.exports.useEffect(()=>{K(m).then(i=>{i.contents?p(i.contents):p({id:m.id,name:"\u672A\u77E5",imageCount:0})})},[]),l(R,{title:e("div",{className:"query-content",children:e("div",{className:"query-item",children:e(x,{onClick:()=>{r.goBack()},children:"\u8FD4\u56DE"})})}),extra:l(k,{children:[e("div",{children:t&&`${t.name} (${t.imageCount})`}),e("div",{className:"query-content",children:l("div",{className:"query-item",children:[e(D,{value:C,onChange:i=>{N(i)},options:T}),e(D,{defaultValue:d.current.limit,onChange:i=>{d.current.limit=i,d.current.offset=0,v.current.queryList(u=>{v.current.setList(u)})},options:W})]})})]}),children:[e(n,{size:"small",loading:!t,children:t&&l(k,{children:[e(n.Grid,{hoverable:!1,style:o,children:l("div",{className:"flex items-center",children:[e("div",{children:"\u8D26\u6237:"}),e("div",{style:{minHeight:"32px"},className:"pl-4 flex-1 flex items-center",children:t.account||"-"})]})}),e(n.Grid,{hoverable:!1,style:o,children:l("div",{className:"flex items-center",children:[e("div",{children:"id:"}),e("div",{style:{minHeight:"32px"},className:"pl-4 flex-1 flex items-center",children:t.id||"-"})]})}),e(n.Grid,{hoverable:!1,style:o,children:l("div",{className:"flex items-center",children:[e("div",{children:"likeLevel:"}),e("div",{className:"pl-4 flex-1",children:e(y,{value:t.likeLevel,onChange:i=>{p(u=>B(g({},u||{}),{likeLevel:i|0}))}})})]})}),l(n.Grid,{hoverable:!1,style:o,children:[e(x,{className:"ml-4",type:"primary",onClick:()=>{const{id:i,likeLevel:u}=t;V({id:i,likeLevel:u}).then(h=>{h.contents&&h.contents.success?f.success("\u66F4\u65B0\u6210\u529F"):f.error("\u66F4\u65B0\u5931\u8D25")}).catch(h=>{console.log("check error:",h),f.error("\u66F4\u65B0\u5931\u8D25")})},children:"\u66F4\u65B0"}),e(x,{className:"ml-4",type:"primary",onClick:()=>{F(!0)},children:"\u8FFD\u52A0"})]})]})}),e(n,{className:"fall-content",size:"small",children:e(J,{ref:v,columnsCount:C,setColumnsCount:N,initialLoad:!0,queryParams:m,pageParams:d,queryFn:$})}),e(H,{title:"\u8FFD\u52A0",confirmLoading:S,visible:q,onCancel:()=>F(!1),onOk:async()=>{I(!0),O(g({id:m.id},c.current)).then(()=>{f.success("\u66F4\u65B0\u6210\u529F"),setTimeout(()=>{window.location.reload()},1e3)}).finally(()=>{I(!1)})},children:e(n,{size:"small",children:l(n.Grid,{hoverable:!1,style:o,children:[l("div",{className:"flex items-center",children:[e("div",{children:"\u8D77\u59CB\u70B9:"}),e("div",{className:"pl-4 flex-1",children:e(y,{value:c.current.offset,onChange:i=>{c.current.offset=i}})})]}),l("div",{className:"flex items-center",children:[e("div",{children:"\u7ED3\u675F\u70B9:"}),e("div",{className:"pl-4 flex-1",children:e(y,{value:c.current.limit,onChange:i=>{c.current.limit=i}})})]})]})})})]})}export{ne as default};
