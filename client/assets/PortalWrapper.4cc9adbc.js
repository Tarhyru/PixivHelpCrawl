import{i as S,e as L,F as w,b as R,d as W,w as _,G as P,m as O}from"./index.c8ca1af3.js";import{r as C}from"./react-venders.669d625f.js";import{g as E,P as x}from"./RouteContext.0a09958b.js";function p(f){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!f)return{};var n=c.element,o=n===void 0?document.body:n,e={},t=Object.keys(f);return t.forEach(function(r){e[r]=o.style[r]}),t.forEach(function(r){o.style[r]=f[r]}),e}function D(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var k={},N=function(f){if(!(!D()&&!f)){var c="ant-scrolling-effect",n=new RegExp("".concat(c),"g"),o=document.body.className;if(f){if(!n.test(o))return;p(k),k={},document.body.className=o.replace(n,"").trim();return}var e=E();if(e&&(k=p({position:"relative",width:"calc(100% - ".concat(e,"px)")}),!n.test(o))){var t="".concat(o," ").concat(c);document.body.className=t.trim()}}},u=[],$="ant-scrolling-effect",y=new RegExp("".concat($),"g"),H=0,b=new Map,U=S(function f(c){var n=this;L(this,f),this.lockTarget=void 0,this.options=void 0,this.getContainer=function(){var o;return(o=n.options)===null||o===void 0?void 0:o.container},this.reLock=function(o){var e=u.find(function(t){var r=t.target;return r===n.lockTarget});e&&n.unLock(),n.options=o,e&&(e.options=o,n.lock())},this.lock=function(){var o;if(!u.some(function(i){var a=i.target;return a===n.lockTarget})){if(u.some(function(i){var a,l=i.options;return(l==null?void 0:l.container)===((a=n.options)===null||a===void 0?void 0:a.container)})){u=[].concat(w(u),[{target:n.lockTarget,options:n.options}]);return}var e=0,t=((o=n.options)===null||o===void 0?void 0:o.container)||document.body;(t===document.body&&window.innerWidth-document.documentElement.clientWidth>0||t.scrollHeight>t.clientHeight)&&(e=E());var r=t.className;if(u.filter(function(i){var a,l=i.options;return(l==null?void 0:l.container)===((a=n.options)===null||a===void 0?void 0:a.container)}).length===0&&b.set(t,p({width:e!==0?"calc(100% - ".concat(e,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:t})),!y.test(r)){var s="".concat(r," ").concat($);t.className=s.trim()}u=[].concat(w(u),[{target:n.lockTarget,options:n.options}])}},this.unLock=function(){var o,e=u.find(function(s){var i=s.target;return i===n.lockTarget});if(u=u.filter(function(s){var i=s.target;return i!==n.lockTarget}),!(!e||u.some(function(s){var i,a=s.options;return(a==null?void 0:a.container)===((i=e.options)===null||i===void 0?void 0:i.container)}))){var t=((o=n.options)===null||o===void 0?void 0:o.container)||document.body,r=t.className;!y.test(r)||(p(b.get(t),{element:t}),b.delete(t),t.className=t.className.replace(y,"").trim())}},this.lockTarget=H++,this.options=c}),d=0,m=P(),g={},v=function(c){if(!m)return null;if(c){if(typeof c=="string")return document.querySelectorAll(c)[0];if(typeof c=="function")return c();if(O(c)==="object"&&c instanceof window.HTMLElement)return c}return document.body},j=function(f){R(n,f);var c=W(n);function n(o){var e;return L(this,n),e=c.call(this,o),e.container=void 0,e.componentRef=C.exports.createRef(),e.rafId=void 0,e.scrollLocker=void 0,e.renderComponent=void 0,e.updateScrollLocker=function(t){var r=t||{},s=r.visible,i=e.props,a=i.getContainer,l=i.visible;l&&l!==s&&m&&v(a)!==e.scrollLocker.getContainer()&&e.scrollLocker.reLock({container:v(a)})},e.updateOpenCount=function(t){var r=t||{},s=r.visible,i=r.getContainer,a=e.props,l=a.visible,h=a.getContainer;l!==s&&m&&v(h)===document.body&&(l&&!s?d+=1:t&&(d-=1));var T=typeof h=="function"&&typeof i=="function";(T?h.toString()!==i.toString():h!==i)&&e.removeCurrentContainer()},e.attachToParent=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(t||e.container&&!e.container.parentNode){var r=v(e.props.getContainer);return r?(r.appendChild(e.container),!0):!1}return!0},e.getContainer=function(){return m?(e.container||(e.container=document.createElement("div"),e.attachToParent(!0)),e.setWrapperClassName(),e.container):null},e.setWrapperClassName=function(){var t=e.props.wrapperClassName;e.container&&t&&t!==e.container.className&&(e.container.className=t)},e.removeCurrentContainer=function(){var t,r;(t=e.container)===null||t===void 0||(r=t.parentNode)===null||r===void 0||r.removeChild(e.container)},e.switchScrollingEffect=function(){d===1&&!Object.keys(g).length?(N(),g=p({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"})):d||(p(g),g={},N(!0))},e.scrollLocker=new U({container:v(o.getContainer)}),e}return S(n,[{key:"componentDidMount",value:function(){var e=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=_(function(){e.forceUpdate()}))}},{key:"componentDidUpdate",value:function(e){this.updateOpenCount(e),this.updateScrollLocker(e),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visible,r=e.getContainer;m&&v(r)===document.body&&(d=t&&d?d-1:d),this.removeCurrentContainer(),_.cancel(this.rafId)}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.forceRender,s=e.visible,i=null,a={getOpenCount:function(){return d},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(r||s||this.componentRef.current)&&(i=C.exports.createElement(x,{getContainer:this.getContainer,ref:this.componentRef},t(a))),i}}]),n}(C.exports.Component);export{j as P};
